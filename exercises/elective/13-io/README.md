## Що е то монада?

### "Контейнери"

> **Въпрос:** Кое е общото между следните типове?

```haskell
data Maybe a = Nothing | Just a

data Either e a = Left e | Right a

data List a = Nil | Cons a (List a) -- Еквивалент на стандартния Хаскелски списък
```

### `Functor`

> **Въпрос:** Каква е абстракцията, която енкапсулира класа `Functor`?

```haskell
class Functor f where
  fmap :: (a -> b) -> f a -> f b
```

### `Monad`

> **Въпрос:** Каква е абстракцията, която енкапсулира класа `Monad`?

```haskell
class Monad m where
  return :: a -> m a                    -- pure, мислете си за `Just 1` или за списък с един елемент
  (>>=) :: m a -> (a -> m b) -> m b     -- bind, мислете си за `concatMap`/`andThen`
```

> [!NOTE]
> Модулът [Control.Monad](https://hackage.haskell.org/package/base-4.21.0.0/docs/Control-Monad.html) съдържа различни полезни функции за работа с монади.

###  Задачи:

1. Имплементирайте класа `Functor` за типовете `Maybe`, `Either` и `[]`

2. Имплементирайте класа `Monad` за типовете `Maybe`, `Either` и `[]`

3. Всъщност, в Хаскел, класът `Monad` наследява `Functor`. Имплементирайте `fmap` използвайки методите на класа `Monad`.

4. Имплементирайте функцията `liftM2 :: Monad m => (a -> b -> c) -> m a -> m b -> m c`, която приема двуаргументна функция и я "повдига" (lifts) в монадичен контекст.

5. Имплементирайте функцията `sequence :: (Monad m) => [m a] -> m [a]`, която приема списък от "действия" и връща "действие", връщащо списък.

## Входно-изходни операции

### Четене от конзола

  - `getChar :: IO Char`: Прочита един символ
  - `getLine :: IO String`: Прочита един ред
  - `readLn :: Read a => IO a`: Прочита и "парсва" ред

### Oтпечатване на конзола

  - `putChar :: Char -> IO ()`: Отпечатва символ
  - `putStr :: String -> IO ()`: Отпечатва символен низ
  - `putStrLn :: String -> IO ()`: Отпечатва символен низ и добавя нов ред
  - `print :: Show a => a -> IO ()`: Отпечатва обект, който е инстанция на класа `Show`

### `main`

```haskell
main :: IO ()
main = putStrLn "Hello World!"
```

### `do`-notation

```haskell
main :: IO ()
main = do
    a :: Int <- readLn
    b :: Int <- readLn
    print $ a + b
```

### Задачи:

1. Защо този код _**не**_ работи: `main = putStrLn ("Echo: " ++ getLine)`? Как да го оправим?

2. Пренапишете примера по-горе, като използвате _bind_ оператора `(>>=)`, вместо `do`.

3. Напишете програма която чете произволен брой числа от конзолата, докато потребителя не въведе 0, след което отпечатва сбора им.
